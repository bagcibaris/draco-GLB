var _=function(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null},t=/*#__PURE__*/function(){function _(_,t,e,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(_.buffer,_.byteOffset+t,e),this._littleEndian=r,this._offset=0}var t=_.prototype;return t._nextUint8=function(){var _=this._dataView.getUint8(this._offset);return this._offset+=1,_},t._nextUint16=function(){var _=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,_},t._nextUint32=function(){var _=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,_},t._nextUint64=function(){var _=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),e=_+Math.pow(2,32)*t;return this._offset+=8,e},t._nextInt32=function(){var _=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,_},t._skip=function(_){return this._offset+=_,this},t._scan=function(_,t){void 0===t&&(t=0);for(var e=this._offset,r=0;this._dataView.getUint8(this._offset)!==t&&r<_;)r++,this._offset++;return r<_&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+e,r)},_}(),e=new Uint8Array([0]),r=[171,75,84,88,32,50,48,187,13,10,26,10];function R(){return R=Object.assign?Object.assign.bind():function(_){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(_[r]=e[r])}return _},R.apply(this,arguments)}function s(_,t){(null==t||t>_.length)&&(t=_.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=_[e];return r}function n(_,t){var e="undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(e)return(e=e.call(_)).next.bind(e);if(Array.isArray(_)||(e=function(_,t){if(_){if("string"==typeof _)return s(_,t);var e=Object.prototype.toString.call(_).slice(8,-1);return"Object"===e&&_.constructor&&(e=_.constructor.name),"Map"===e||"Set"===e?Array.from(_):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(_,t):void 0}}(_))||t&&_&&"number"==typeof _.length){e&&(_=e);var r=0;return function(){return r>=_.length?{done:!0}:{done:!1,value:_[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(_){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(_):Buffer.from(_)}function A(_){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(_):Buffer.from(_).toString("utf8")}function O(_){for(var t,e=0,r=n(_);!(t=r()).done;)e+=t.value.byteLength;for(var R,s=new Uint8Array(e),o=0,A=n(_);!(R=A()).done;){var O=R.value;s.set(new Uint8Array(O),o),o+=O.byteLength}return s}var T={keepWriter:!1};exports.KDF_DF_MODEL_UASTC=166,exports.KHR_DF_CHANNEL_RGBSDA_ALPHA=15,exports.KHR_DF_CHANNEL_RGBSDA_BLUE=2,exports.KHR_DF_CHANNEL_RGBSDA_DEPTH=14,exports.KHR_DF_CHANNEL_RGBSDA_GREEN=1,exports.KHR_DF_CHANNEL_RGBSDA_RED=0,exports.KHR_DF_CHANNEL_RGBSDA_STENCIL=13,exports.KHR_DF_FLAG_ALPHA_PREMULTIPLIED=1,exports.KHR_DF_FLAG_ALPHA_STRAIGHT=0,exports.KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT=0,exports.KHR_DF_MODEL_ASTC=162,exports.KHR_DF_MODEL_ETC1=160,exports.KHR_DF_MODEL_ETC1S=163,exports.KHR_DF_MODEL_ETC2=161,exports.KHR_DF_MODEL_RGBSDA=1,exports.KHR_DF_MODEL_UNSPECIFIED=0,exports.KHR_DF_PRIMARIES_ACES=6,exports.KHR_DF_PRIMARIES_ACESCC=7,exports.KHR_DF_PRIMARIES_ADOBERGB=11,exports.KHR_DF_PRIMARIES_BT2020=4,exports.KHR_DF_PRIMARIES_BT601_EBU=2,exports.KHR_DF_PRIMARIES_BT601_SMPTE=3,exports.KHR_DF_PRIMARIES_BT709=1,exports.KHR_DF_PRIMARIES_CIEXYZ=5,exports.KHR_DF_PRIMARIES_DISPLAYP3=10,exports.KHR_DF_PRIMARIES_NTSC1953=8,exports.KHR_DF_PRIMARIES_PAL525=9,exports.KHR_DF_PRIMARIES_UNSPECIFIED=0,exports.KHR_DF_SAMPLE_DATATYPE_EXPONENT=32,exports.KHR_DF_SAMPLE_DATATYPE_FLOAT=128,exports.KHR_DF_SAMPLE_DATATYPE_LINEAR=16,exports.KHR_DF_SAMPLE_DATATYPE_SIGNED=64,exports.KHR_DF_TRANSFER_ACESCC=16,exports.KHR_DF_TRANSFER_ACESCCT=17,exports.KHR_DF_TRANSFER_ADOBERGB=18,exports.KHR_DF_TRANSFER_BT1886=7,exports.KHR_DF_TRANSFER_DCIP3=12,exports.KHR_DF_TRANSFER_HLG_EOTF=9,exports.KHR_DF_TRANSFER_HLG_OETF=8,exports.KHR_DF_TRANSFER_ITU=3,exports.KHR_DF_TRANSFER_LINEAR=1,exports.KHR_DF_TRANSFER_NTSC=4,exports.KHR_DF_TRANSFER_PAL625_EOTF=14,exports.KHR_DF_TRANSFER_PAL_OETF=13,exports.KHR_DF_TRANSFER_PQ_EOTF=10,exports.KHR_DF_TRANSFER_PQ_OETF=11,exports.KHR_DF_TRANSFER_SLOG=5,exports.KHR_DF_TRANSFER_SLOG2=6,exports.KHR_DF_TRANSFER_SRGB=2,exports.KHR_DF_TRANSFER_ST240=15,exports.KHR_DF_TRANSFER_UNSPECIFIED=0,exports.KHR_DF_VENDORID_KHRONOS=0,exports.KHR_DF_VERSION=2,exports.KHR_SUPERCOMPRESSION_BASISLZ=1,exports.KHR_SUPERCOMPRESSION_NONE=0,exports.KHR_SUPERCOMPRESSION_ZLIB=3,exports.KHR_SUPERCOMPRESSION_ZSTD=2,exports.KTX2Container=_,exports.VK_FORMAT_A1R5G5B5_UNORM_PACK16=8,exports.VK_FORMAT_A2B10G10R10_SINT_PACK32=69,exports.VK_FORMAT_A2B10G10R10_SNORM_PACK32=65,exports.VK_FORMAT_A2B10G10R10_UINT_PACK32=68,exports.VK_FORMAT_A2B10G10R10_UNORM_PACK32=64,exports.VK_FORMAT_A2R10G10B10_SINT_PACK32=63,exports.VK_FORMAT_A2R10G10B10_SNORM_PACK32=59,exports.VK_FORMAT_A2R10G10B10_UINT_PACK32=62,exports.VK_FORMAT_A2R10G10B10_UNORM_PACK32=58,exports.VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT=1000340001,exports.VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT=100034e4,exports.VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT=1000066011,exports.VK_FORMAT_ASTC_10x10_SRGB_BLOCK=180,exports.VK_FORMAT_ASTC_10x10_UNORM_BLOCK=179,exports.VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT=1000066008,exports.VK_FORMAT_ASTC_10x5_SRGB_BLOCK=174,exports.VK_FORMAT_ASTC_10x5_UNORM_BLOCK=173,exports.VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT=1000066009,exports.VK_FORMAT_ASTC_10x6_SRGB_BLOCK=176,exports.VK_FORMAT_ASTC_10x6_UNORM_BLOCK=175,exports.VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT=1000066010,exports.VK_FORMAT_ASTC_10x8_SRGB_BLOCK=178,exports.VK_FORMAT_ASTC_10x8_UNORM_BLOCK=177,exports.VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT=1000066012,exports.VK_FORMAT_ASTC_12x10_SRGB_BLOCK=182,exports.VK_FORMAT_ASTC_12x10_UNORM_BLOCK=181,exports.VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT=1000066013,exports.VK_FORMAT_ASTC_12x12_SRGB_BLOCK=184,exports.VK_FORMAT_ASTC_12x12_UNORM_BLOCK=183,exports.VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT=1000066e3,exports.VK_FORMAT_ASTC_4x4_SRGB_BLOCK=158,exports.VK_FORMAT_ASTC_4x4_UNORM_BLOCK=157,exports.VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT=1000066001,exports.VK_FORMAT_ASTC_5x4_SRGB_BLOCK=160,exports.VK_FORMAT_ASTC_5x4_UNORM_BLOCK=159,exports.VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT=1000066002,exports.VK_FORMAT_ASTC_5x5_SRGB_BLOCK=162,exports.VK_FORMAT_ASTC_5x5_UNORM_BLOCK=161,exports.VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT=1000066003,exports.VK_FORMAT_ASTC_6x5_SRGB_BLOCK=164,exports.VK_FORMAT_ASTC_6x5_UNORM_BLOCK=163,exports.VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT=1000066004,exports.VK_FORMAT_ASTC_6x6_SRGB_BLOCK=166,exports.VK_FORMAT_ASTC_6x6_UNORM_BLOCK=165,exports.VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT=1000066005,exports.VK_FORMAT_ASTC_8x5_SRGB_BLOCK=168,exports.VK_FORMAT_ASTC_8x5_UNORM_BLOCK=167,exports.VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT=1000066006,exports.VK_FORMAT_ASTC_8x6_SRGB_BLOCK=170,exports.VK_FORMAT_ASTC_8x6_UNORM_BLOCK=169,exports.VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT=1000066007,exports.VK_FORMAT_ASTC_8x8_SRGB_BLOCK=172,exports.VK_FORMAT_ASTC_8x8_UNORM_BLOCK=171,exports.VK_FORMAT_B10G11R11_UFLOAT_PACK32=122,exports.VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16=1000156011,exports.VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16=1000156021,exports.VK_FORMAT_B4G4R4A4_UNORM_PACK16=3,exports.VK_FORMAT_B5G5R5A1_UNORM_PACK16=7,exports.VK_FORMAT_B5G6R5_UNORM_PACK16=5,exports.VK_FORMAT_B8G8R8A8_SINT=49,exports.VK_FORMAT_B8G8R8A8_SNORM=45,exports.VK_FORMAT_B8G8R8A8_SRGB=50,exports.VK_FORMAT_B8G8R8A8_UINT=48,exports.VK_FORMAT_B8G8R8A8_UNORM=44,exports.VK_FORMAT_B8G8R8_SINT=35,exports.VK_FORMAT_B8G8R8_SNORM=31,exports.VK_FORMAT_B8G8R8_SRGB=36,exports.VK_FORMAT_B8G8R8_UINT=34,exports.VK_FORMAT_B8G8R8_UNORM=30,exports.VK_FORMAT_BC1_RGBA_SRGB_BLOCK=134,exports.VK_FORMAT_BC1_RGBA_UNORM_BLOCK=133,exports.VK_FORMAT_BC1_RGB_SRGB_BLOCK=132,exports.VK_FORMAT_BC1_RGB_UNORM_BLOCK=131,exports.VK_FORMAT_BC2_SRGB_BLOCK=136,exports.VK_FORMAT_BC2_UNORM_BLOCK=135,exports.VK_FORMAT_BC3_SRGB_BLOCK=138,exports.VK_FORMAT_BC3_UNORM_BLOCK=137,exports.VK_FORMAT_BC4_SNORM_BLOCK=140,exports.VK_FORMAT_BC4_UNORM_BLOCK=139,exports.VK_FORMAT_BC5_SNORM_BLOCK=142,exports.VK_FORMAT_BC5_UNORM_BLOCK=141,exports.VK_FORMAT_BC6H_SFLOAT_BLOCK=144,exports.VK_FORMAT_BC6H_UFLOAT_BLOCK=143,exports.VK_FORMAT_BC7_SRGB_BLOCK=146,exports.VK_FORMAT_BC7_UNORM_BLOCK=145,exports.VK_FORMAT_D16_UNORM=124,exports.VK_FORMAT_D16_UNORM_S8_UINT=128,exports.VK_FORMAT_D24_UNORM_S8_UINT=129,exports.VK_FORMAT_D32_SFLOAT=126,exports.VK_FORMAT_D32_SFLOAT_S8_UINT=130,exports.VK_FORMAT_E5B9G9R9_UFLOAT_PACK32=123,exports.VK_FORMAT_EAC_R11G11_SNORM_BLOCK=156,exports.VK_FORMAT_EAC_R11G11_UNORM_BLOCK=155,exports.VK_FORMAT_EAC_R11_SNORM_BLOCK=154,exports.VK_FORMAT_EAC_R11_UNORM_BLOCK=153,exports.VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK=150,exports.VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK=149,exports.VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK=152,exports.VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK=151,exports.VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK=148,exports.VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK=147,exports.VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16=1000156010,exports.VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16=1000156020,exports.VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG=1000054004,exports.VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG=1000054e3,exports.VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG=1000054005,exports.VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG=1000054001,exports.VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG=1000054006,exports.VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG=1000054002,exports.VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG=1000054007,exports.VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG=1000054003,exports.VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16=1000156009,exports.VK_FORMAT_R10X6G10X6_UNORM_2PACK16=1000156008,exports.VK_FORMAT_R10X6_UNORM_PACK16=1000156007,exports.VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16=1000156019,exports.VK_FORMAT_R12X4G12X4_UNORM_2PACK16=1000156018,exports.VK_FORMAT_R12X4_UNORM_PACK16=1000156017,exports.VK_FORMAT_R16G16B16A16_SFLOAT=97,exports.VK_FORMAT_R16G16B16A16_SINT=96,exports.VK_FORMAT_R16G16B16A16_SNORM=92,exports.VK_FORMAT_R16G16B16A16_UINT=95,exports.VK_FORMAT_R16G16B16A16_UNORM=91,exports.VK_FORMAT_R16G16B16_SFLOAT=90,exports.VK_FORMAT_R16G16B16_SINT=89,exports.VK_FORMAT_R16G16B16_SNORM=85,exports.VK_FORMAT_R16G16B16_UINT=88,exports.VK_FORMAT_R16G16B16_UNORM=84,exports.VK_FORMAT_R16G16_SFLOAT=83,exports.VK_FORMAT_R16G16_SINT=82,exports.VK_FORMAT_R16G16_SNORM=78,exports.VK_FORMAT_R16G16_UINT=81,exports.VK_FORMAT_R16G16_UNORM=77,exports.VK_FORMAT_R16_SFLOAT=76,exports.VK_FORMAT_R16_SINT=75,exports.VK_FORMAT_R16_SNORM=71,exports.VK_FORMAT_R16_UINT=74,exports.VK_FORMAT_R16_UNORM=70,exports.VK_FORMAT_R32G32B32A32_SFLOAT=109,exports.VK_FORMAT_R32G32B32A32_SINT=108,exports.VK_FORMAT_R32G32B32A32_UINT=107,exports.VK_FORMAT_R32G32B32_SFLOAT=106,exports.VK_FORMAT_R32G32B32_SINT=105,exports.VK_FORMAT_R32G32B32_UINT=104,exports.VK_FORMAT_R32G32_SFLOAT=103,exports.VK_FORMAT_R32G32_SINT=102,exports.VK_FORMAT_R32G32_UINT=101,exports.VK_FORMAT_R32_SFLOAT=100,exports.VK_FORMAT_R32_SINT=99,exports.VK_FORMAT_R32_UINT=98,exports.VK_FORMAT_R4G4B4A4_UNORM_PACK16=2,exports.VK_FORMAT_R4G4_UNORM_PACK8=1,exports.VK_FORMAT_R5G5B5A1_UNORM_PACK16=6,exports.VK_FORMAT_R5G6B5_UNORM_PACK16=4,exports.VK_FORMAT_R64G64B64A64_SFLOAT=121,exports.VK_FORMAT_R64G64B64A64_SINT=120,exports.VK_FORMAT_R64G64B64A64_UINT=119,exports.VK_FORMAT_R64G64B64_SFLOAT=118,exports.VK_FORMAT_R64G64B64_SINT=117,exports.VK_FORMAT_R64G64B64_UINT=116,exports.VK_FORMAT_R64G64_SFLOAT=115,exports.VK_FORMAT_R64G64_SINT=114,exports.VK_FORMAT_R64G64_UINT=113,exports.VK_FORMAT_R64_SFLOAT=112,exports.VK_FORMAT_R64_SINT=111,exports.VK_FORMAT_R64_UINT=110,exports.VK_FORMAT_R8G8B8A8_SINT=42,exports.VK_FORMAT_R8G8B8A8_SNORM=38,exports.VK_FORMAT_R8G8B8A8_SRGB=43,exports.VK_FORMAT_R8G8B8A8_UINT=41,exports.VK_FORMAT_R8G8B8A8_UNORM=37,exports.VK_FORMAT_R8G8B8_SINT=28,exports.VK_FORMAT_R8G8B8_SNORM=24,exports.VK_FORMAT_R8G8B8_SRGB=29,exports.VK_FORMAT_R8G8B8_UINT=27,exports.VK_FORMAT_R8G8B8_UNORM=23,exports.VK_FORMAT_R8G8_SINT=21,exports.VK_FORMAT_R8G8_SNORM=17,exports.VK_FORMAT_R8G8_SRGB=22,exports.VK_FORMAT_R8G8_UINT=20,exports.VK_FORMAT_R8G8_UNORM=16,exports.VK_FORMAT_R8_SINT=14,exports.VK_FORMAT_R8_SNORM=10,exports.VK_FORMAT_R8_SRGB=15,exports.VK_FORMAT_R8_UINT=13,exports.VK_FORMAT_R8_UNORM=9,exports.VK_FORMAT_S8_UINT=127,exports.VK_FORMAT_UNDEFINED=0,exports.VK_FORMAT_X8_D24_UNORM_PACK32=125,exports.read=function(e){var R=new Uint8Array(e.buffer,e.byteOffset,r.length);if(R[0]!==r[0]||R[1]!==r[1]||R[2]!==r[2]||R[3]!==r[3]||R[4]!==r[4]||R[5]!==r[5]||R[6]!==r[6]||R[7]!==r[7]||R[8]!==r[8]||R[9]!==r[9]||R[10]!==r[10]||R[11]!==r[11])throw new Error("Missing KTX 2.0 identifier.");var s=new _,n=17*Uint32Array.BYTES_PER_ELEMENT,o=new t(e,r.length,n,!0);s.vkFormat=o._nextUint32(),s.typeSize=o._nextUint32(),s.pixelWidth=o._nextUint32(),s.pixelHeight=o._nextUint32(),s.pixelDepth=o._nextUint32(),s.layerCount=o._nextUint32(),s.faceCount=o._nextUint32();var O=o._nextUint32();s.supercompressionScheme=o._nextUint32();for(var T=o._nextUint32(),i=o._nextUint32(),x=o._nextUint32(),p=o._nextUint32(),K=o._nextUint64(),a=o._nextUint64(),F=new t(e,r.length+n,3*O*8,!0),M=0;M<O;M++)s.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+F._nextUint64(),F._nextUint64()),uncompressedByteLength:F._nextUint64()});for(var B=new t(e,T,i,!0),S={vendorId:B._skip(4)._nextUint16(),descriptorType:B._nextUint16(),versionNumber:B._nextUint16(),descriptorBlockSize:B._nextUint16(),colorModel:B._nextUint8(),colorPrimaries:B._nextUint8(),transferFunction:B._nextUint8(),flags:B._nextUint8(),texelBlockDimension:[B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8()],bytesPlane:[B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8()],samples:[]},U=(S.descriptorBlockSize/4-6)/4,C=0;C<U;C++){var V={bitOffset:B._nextUint16(),bitLength:B._nextUint8(),channelType:B._nextUint8(),samplePosition:[B._nextUint8(),B._nextUint8(),B._nextUint8(),B._nextUint8()],sampleLower:-Infinity,sampleUpper:Infinity};64&V.channelType?(V.sampleLower=B._nextInt32(),V.sampleUpper=B._nextInt32()):(V.sampleLower=B._nextUint32(),V.sampleUpper=B._nextUint32()),S.samples[C]=V}s.dataFormatDescriptor.length=0,s.dataFormatDescriptor.push(S);for(var l=new t(e,x,p,!0);l._offset<p;){var N=l._nextUint32(),L=l._scan(N),f=A(L),G=l._scan(N-L.byteLength);s.keyValue[f]=f.match(/^ktx/i)?A(G):G,l._offset%4&&l._skip(4-l._offset%4)}if(a<=0)return s;for(var D=new t(e,K,a,!0),E=D._nextUint16(),h=D._nextUint16(),I=D._nextUint32(),P=D._nextUint32(),c=D._nextUint32(),y=D._nextUint32(),g=[],u=0;u<O;u++)g.push({imageFlags:D._nextUint32(),rgbSliceByteOffset:D._nextUint32(),rgbSliceByteLength:D._nextUint32(),alphaSliceByteOffset:D._nextUint32(),alphaSliceByteLength:D._nextUint32()});var d=K+D._offset,b=d+I,v=b+P,m=v+c,H=new Uint8Array(e.buffer,e.byteOffset+d,I),w=new Uint8Array(e.buffer,e.byteOffset+b,P),X=new Uint8Array(e.buffer,e.byteOffset+v,c),k=new Uint8Array(e.buffer,e.byteOffset+m,y);return s.globalData={endpointCount:E,selectorCount:h,imageDescs:g,endpointsData:H,selectorsData:w,tablesData:X,extendedData:k},s},exports.write=function(_,t){void 0===t&&(t={}),t=R({},T,t);var s=new ArrayBuffer(0);if(_.globalData){var n=new ArrayBuffer(20+5*_.globalData.imageDescs.length*4),A=new DataView(n);A.setUint16(0,_.globalData.endpointCount,!0),A.setUint16(2,_.globalData.selectorCount,!0),A.setUint32(4,_.globalData.endpointsData.byteLength,!0),A.setUint32(8,_.globalData.selectorsData.byteLength,!0),A.setUint32(12,_.globalData.tablesData.byteLength,!0),A.setUint32(16,_.globalData.extendedData.byteLength,!0);for(var i=0;i<_.globalData.imageDescs.length;i++){var x=_.globalData.imageDescs[i];A.setUint32(20+5*i*4+0,x.imageFlags,!0),A.setUint32(20+5*i*4+4,x.rgbSliceByteOffset,!0),A.setUint32(20+5*i*4+8,x.rgbSliceByteLength,!0),A.setUint32(20+5*i*4+12,x.alphaSliceByteOffset,!0),A.setUint32(20+5*i*4+16,x.alphaSliceByteLength,!0)}s=O([n,_.globalData.endpointsData,_.globalData.selectorsData,_.globalData.tablesData,_.globalData.extendedData])}var p=[],K=_.keyValue;for(var a in t.keepWriter||(K=R({},_.keyValue,{KTXwriter:"KTX-Parse v0.3.3"})),K){var F=K[a],M=o(a),B="string"==typeof F?o(F):F,S=M.byteLength+1+B.byteLength+1,U=S%4?4-S%4:0;p.push(O([new Uint32Array([S]),M,e,B,e,new Uint8Array(U).fill(0)]))}var C=O(p);if(1!==_.dataFormatDescriptor.length||0!==_.dataFormatDescriptor[0].descriptorType)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");var V=_.dataFormatDescriptor[0],l=new ArrayBuffer(28+16*V.samples.length),N=new DataView(l),L=24+16*V.samples.length;if(N.setUint32(0,l.byteLength,!0),N.setUint16(4,V.vendorId,!0),N.setUint16(6,V.descriptorType,!0),N.setUint16(8,V.versionNumber,!0),N.setUint16(10,L,!0),N.setUint8(12,V.colorModel),N.setUint8(13,V.colorPrimaries),N.setUint8(14,V.transferFunction),N.setUint8(15,V.flags),!Array.isArray(V.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");N.setUint8(16,V.texelBlockDimension[0]),N.setUint8(17,V.texelBlockDimension[1]),N.setUint8(18,V.texelBlockDimension[2]),N.setUint8(19,V.texelBlockDimension[3]);for(var f=0;f<8;f++)N.setUint8(20+f,V.bytesPlane[f]);for(var G=0;G<V.samples.length;G++){var D=V.samples[G],E=28+16*G;if(D.channelID)throw new Error("channelID has been renamed to channelType.");N.setUint16(E+0,D.bitOffset,!0),N.setUint8(E+2,D.bitLength),N.setUint8(E+3,D.channelType),N.setUint8(E+4,D.samplePosition[0]),N.setUint8(E+5,D.samplePosition[1]),N.setUint8(E+6,D.samplePosition[2]),N.setUint8(E+7,D.samplePosition[3]),64&D.channelType?(N.setInt32(E+8,D.sampleLower,!0),N.setInt32(E+12,D.sampleUpper,!0)):(N.setUint32(E+8,D.sampleLower,!0),N.setUint32(E+12,D.sampleUpper,!0))}var h=r.length+68+3*_.levels.length*8,I=h+l.byteLength,P=s.byteLength>0?I+C.byteLength:0;P%8&&(P+=8-P%8);for(var c=[],y=new DataView(new ArrayBuffer(3*_.levels.length*8)),g=(P||I+C.byteLength)+s.byteLength,u=0;u<_.levels.length;u++){var d=_.levels[u];c.push(d.levelData),y.setBigUint64(24*u+0,BigInt(g),!0),y.setBigUint64(24*u+8,BigInt(d.levelData.byteLength),!0),y.setBigUint64(24*u+16,BigInt(d.uncompressedByteLength),!0),g+=d.levelData.byteLength}var b=new ArrayBuffer(68),v=new DataView(b);return v.setUint32(0,_.vkFormat,!0),v.setUint32(4,_.typeSize,!0),v.setUint32(8,_.pixelWidth,!0),v.setUint32(12,_.pixelHeight,!0),v.setUint32(16,_.pixelDepth,!0),v.setUint32(20,_.layerCount,!0),v.setUint32(24,_.faceCount,!0),v.setUint32(28,_.levels.length,!0),v.setUint32(32,_.supercompressionScheme,!0),v.setUint32(36,h,!0),v.setUint32(40,l.byteLength,!0),v.setUint32(44,I,!0),v.setUint32(48,C.byteLength,!0),v.setBigUint64(52,BigInt(s.byteLength>0?P:0),!0),v.setBigUint64(60,BigInt(s.byteLength),!0),new Uint8Array(O([new Uint8Array(r).buffer,b,y.buffer,l,C,P>0?new ArrayBuffer(P-(I+C.byteLength)):new ArrayBuffer(0),s].concat(c)))};
//# sourceMappingURL=ktx-parse.js.map
